<!doctype html><html>
    <head>
      <meta http-equiv="content-type" content="text/html; charset=utf-8">
      <title>相同参数处理</title>
      <meta name="generator" content="CherryTree">
      <link rel="stylesheet" href="res/styles3.css" type="text/css" />
    </head>
    <body><div class='page'><h1 class='title'>相同参数处理</h1><br/> <strong>Struts2 和 和 webwork 对 string 类型参数处理</strong><br /> <br /> ?username=aaa&amp;username=bbb<br /> <br /> 经过 struts2 或者 webwork 处理，<br />就会显示为： <br />&lt;input value=&quot;  aaa,  bbb&quot; name=&quot;username&quot; type=&quot;text&quot; /&gt; <br /><br /><br /><br /><br /><strong>struts2 框架，或 webwork 框架</strong><br />在 struts2 中，一个的页面，甚至这个页面没有任何业务逻辑，只要加上一个参数，就可以让它出错。 <br />只要actionErrors设置为任意值，返回错误页面，如<br />actionErrors=aaaaaaaaaa<br /><br /><br /><br /><br /><strong>Struts2 或 webwork的叹号们</strong><br />这个 action 的 URL，如果是： <br /><a href="http://www.inbreak.net/test.action">http://www.inbreak.net/test.action</a> <br />那么要单独访问这个 adduser 方法，就可以使用这个 URL 访问： <br /><a href="http://www.inbreak.net/test!adduser.action">http://www.inbreak.net/test!adduser.action</a> <br />这是官方推荐的标准做法，很明显这个叹号，就是最大的特征，除了 struts2 和 webwork<br />以外，没有其他的框架，会这么做了。<br /><br /><br /><br /><strong>struts2 </strong><br />当 struts2 处理 url 时，如果遇到以“struts”、或“static”开头，就会认为是在访问静态<br />资源文件。比如 <br /><a href="https://www.cwbook.com.tw/member/struts/domTT.css">https://www.cwbook.com.tw/member/struts/domTT.css</a> <br />有这个文件存在，可以 100%确认就是 struts2，<br />如果是个低版本，就可能触发那个“任意文件下载”漏洞<br /><br /><br /><br /><br /><strong>spring mvc 和 spring 标签库搭配</strong><br /><br /> checkbox 时，会在代码旁边，加上一个隐藏域<br /> 最终看到的页面 html 源码，会是这样的： <br />&lt;form  id=&quot;command&quot;  action=&quot;/springmvc/testbind.htm&quot;  method=&quot;post&quot;&gt;  <br />&lt;input  id=&quot;favorites1&quot;  name=&quot;favorites&quot;  type=&quot;checkbox&quot;  value=&quot;1&quot;/&gt; <br /><strong>&lt;input type=&quot;hidden&quot;  name=&quot;_favorites&quot;  value=&quot; on&quot;/&gt;</strong>computer <br />&lt;/form&gt;<br /><br /><br /><br /><br /><br /><br /><strong>turbine 框架的逗号<br /></strong>turbine 框架，在处理 URL 时，一般会把模板文件，放在一个目录里，这个目录通常叫做<br />“templates”，比如某页面放在 <br />“templates/pubinfo/infopub/businpub.html” <br />这是可以通过如下 URL 访问这个资源： <br /><a href="http://my.b2b.hc360.com/my/turbine/template/pubinfo,infopub,businpub.html">http://my.b2b.hc360.com/my/turbine/template/pubinfo,infopub,businpub.html</a> <br />这个 URL 有两个特征，一个是目录中有 <br />“turbine”，也有“template”。 <br />另一个特征是，目录中有逗号。 <br /><br /><br /><strong>spring  mvc</strong><br />在 spring  mvc 框架中，对于直接处理用户请求的类，有个标准叫法，叫“controller”<br />比如： <br />/xxxController <br />/xxxController.do <br />甚至 <br />/controller/xxx.htm <br />确认后端是 java 应用的情况下，可以有 50%的分值，推测这个是一个 spring  mvc<br /><br /><br /><br /><strong>业务逻辑错误</strong><br />这是个正常的页面： <br /><a href="https://www.cibil.com/online/manageCustomerDetails.do?action=showAddPaymentPage">https://www.cibil.com/online/manageCustomerDetails.do?action=showAddPaymentPage</a><br />猜测到它可能是想处理“showAddPaymentPage”这个方法，或者说这个业务逻辑。<br />像这种指定去处理 action 中的某个业务逻辑，如果指定一个不存在的业务逻辑名称，很可能就错误了<br />我们就给个不存在的： <br /><a href="https://www.cibil.com/online/manageCustomerDetails.do?action=showAddPyy7aymentPage">https://www.cibil.com/online/manageCustomerDetails.do?action=showAddPyy7aymentPage</a> <br /><a href=""><img src="images\282-1.png" alt="images\282-1.png" /></a><br />这是个 struts1 框架的经典错误信息，<br />格式一般是： <br />Action[/XXXXX 这里是 action 的名字]  does  not  contain  method  named  YYYYY 这里是<br />个不存在的方法名字。 <br /><br /><br /><strong>参数类型错误</strong><br />看到一个 int 类型的数字，日期等等，都可以把原本的数字、日期变为一串数字提交上去，就出错了<br />看错误信息<br /><br /><br /><p align="center"><img src="images\home.svg" height="22" width="22">  <a href="index.html">索引</a></p></div></body></html>